<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XBMC ROM utilities</title><link rel="stylesheet" type="text/css" href="default.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.77.1" /><link rel="home" href="#XRU-manual" title="XBMC ROM utilities" /><link rel="next" href="#idp440119072" title="Introduction" /></head><body><div xml:lang="en" class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="XRU-manual"></a>XBMC ROM utilities</h2></div><div><div class="author"><h3 class="author"><span class="surname">Wintermute0110</span></h3><div class="affiliation">
      <div class="address"><p><code class="email">&lt;<a class="email" href="mailto:wintermute0110@gmail.com">wintermute0110@gmail.com</a>&gt;</code></p></div>
    </div></div></div><div><p class="releaseinfo">XBMC ROM utilities 0.1</p></div><div><p class="copyright">Copyright Â© 2014 Wintermute0110</p></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="sect1"><a href="#idp440119072">Introduction</a></span></dt><dt><span class="sect1"><a href="#idp440126192"><span class="application">xru-console</span></a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp440157632">Configuration file</a></span></dt><dt><span class="sect2"><a href="#idp440164496">Understanding ROM filters</a></span></dt><dt><span class="sect2"><a href="#idp440164752">No-Intro One ROM-One Game (1R1G) DATs</a></span></dt><dt><span class="sect2"><a href="#idp440194464">Updating/Copying filtered ROMs</a></span></dt><dt><span class="sect2"><a href="#idp440217008">Art Work</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp440248816"><span class="application">xru-mame</span></a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp440285856">Configuration file</a></span></dt><dt><span class="sect2"><a href="#create_mame_database">Creating the <span class="application">MAME</span> ROM database</a></span></dt><dt><span class="sect2"><a href="#idp440291200">Understanding <span class="application">MAME</span> filters</a></span></dt><dt><span class="sect2"><a href="#idp440322736">Updating/Copying <span class="application">MAME</span> ROMs</a></span></dt><dt><span class="sect2"><a href="#idp440360176">NFO files and Artwork</a></span></dt><dt><span class="sect2"><a href="#idp440377888">Some notes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp440382208"><span class="application">xru-launcher-AL</span></a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp440398880">Configuration</a></span></dt><dt><span class="sect2"><a href="#idp440399136">Checking launchers</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp440417504">Examples</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp440418176">Simple filtering of a console ROM collection</a></span></dt><dt><span class="sect2"><a href="#idp440418608">Splitting <span class="application">MAME</span> ROMs into several launchers
for each driver</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp440443264">Changelog</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp440444224">Version 0.1</a></span></dt></dl></dd></dl></div>






<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp440119072"></a>Introduction</h2></div></div></div>


<p>
XBMC ROM utilities (XRU) is a set of Python scripts that allows you to filter 
your ROM collections to be used with the XBMC launcher plugins like Advanced 
Launcher, ROM Collection Browser, or any other front-end. If the ROM 
collections are updated or a new version of the emulators installed (which may 
require some new ROMs to be updated) XRU is able to synchronise the XBMC 
launchers with the new ROMs quickly and effectively.
</p>

<p>
XRU includes three programs

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
<span class="application">xru-console</span> filters a ROM collection with No-Intro naming conventions and copies 
the filtered list to the destination directory of your choice. Multiple ROM collections, 
each with a different filter, can be configured. Multiple filters can be
configured to the same ROM collection, for example to split the ROMs into
regions. Also, if artwork is available, it may also be synchronised.
</p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="application">xru-mame</span> takes the MAME-generated XML game database 
and merges it with <code class="filename">Catver.ini</code>. Then, 
a set of filters can be defined (for example, to remove mechanical games) so filtered 
ROMs are copied to different destination directories. It also creates NFO files with 
game information for launchers and copies local artwork if available.
</p></li><li class="listitem" style="list-style-type: disc"><p>
<span class="application">xru-launcher-AL</span> parses XBMC's Advanced Launcher configuration file and scans your 
ROM launchers for missing ROMs. It prints a report with the launchers you have to update.
</p></li></ul></div><p>
</p>
</div>


<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp440126192"></a><span class="application">xru-console</span></h2></div></div></div>


<p><span class="application">xru-console</span> requires a mandatory command to 
specify the main action to do. Several commands also require a 
<strong class="userinput"><code>filterName</code></strong>. Optionally, some command actions can be 
modified with options.</p>

<pre class="screen">
$ xru-console.py [-options] command [filterName]
</pre>

<p>The following commands are supported.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>usage</code></strong></p>
<p>Prints a summary of the commands and options.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list</code></strong></p>
<p>Lists every ROM set system defined in the configuration file and 
some basic information. Use <strong class="userinput"><code>--verbose</code></strong> to get more 
information.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list-nointro &lt;filterName&gt;</code></strong></p>
<p>Lists every ROM defined in the No-Intro DAT file.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>check-nointro &lt;filterName&gt;</code></strong></p>
<p>Scans the source directory and reads the No-Intro XML data file. 
Checks if you have all the ROMs defined in the No-INTRO DAT and reports the 
number of missing and unknown ROMs.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list-tags &lt;filterName&gt;</code></strong></p>
<p>Scans the source directory and reports the total number 
of ROM files, all the tags found, and the number of ROMs 
that have each tag. It also display ROMs without any tag.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>check-filter &lt;filterName&gt;</code></strong></p>
<p>Applies ROM filters defined in the configuration file and prints a list of
the scored ROMs.
used.
</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>copy &lt;filterName&gt;</code></strong></p>
<p>Applies the ROM filters defined in the configuration file and 
copies the contents of the source directory into the destination directory. 
This always overwrites ROMs in the destination directory and may take a 
long time for huge ROM collections and network-mounted destination 
directories.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>update &lt;filterName&gt;</code></strong></p>
<p>Like copy, but only copies ROMs if file sizes are different. 
This may save a lot of time.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>check-artwork &lt;filterName&gt;</code></strong></p>
<p>Reads the ROMs in destDir, checks if you have the corresponding artwork
files, and prints a report.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>copy-artwork &lt;filterName&gt;</code></strong></p>
<p>Reads the ROMs in destDir and tries to copy the matching artwork to 
the destination directory.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>update-artwork &lt;filterName&gt;</code></strong></p>
<p>Like copy-artwork, but only copies images if file sizes are different. 
This may save a lot of time.</p>
</li></ul></div>

<p>The following options are supported.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<p><strong class="userinput"><code>-h, --help</code></strong></p>
<p>Prints a short command reference</p>
</li><li class="listitem">
<p><strong class="userinput"><code>-v, --verbose</code></strong></p>
<p>Prints more information about what's going on. Can be used several
times to get even more information.</p>
</li><li class="listitem">
<p><strong class="userinput"><code>-l, --log</code></strong></p>
<p>Saves program output in <code class="filename">xru-console-log.txt</code>.</p>
</li><li class="listitem">
<p><strong class="userinput"><code>--logto &lt;logName&gt;</code></strong></p>
<p>Saves program output in the file you specify.</p>
</li><li class="listitem">
<p><strong class="userinput"><code>--dryRun</code></strong></p>
<p>don't modify the destination directory at all, just print the operations
to be done.</p>
</li><li class="listitem">
<p><strong class="userinput"><code>--cleanROMs</code></strong></p>
<p>Deletes ROMs in the destination directory not present in the filtered 
ROM list (unknown ROMs).</p>
</li><li class="listitem">
<p><strong class="userinput"><code>--cleanNFO</code></strong></p>
<p>Deletes redundant NFO files in destination directory (unknown NFO 
files).</p>
</li><li class="listitem">
<p><strong class="userinput"><code>--cleanArtWork</code></strong></p>
<p>Deletes thumbs and fanart in the artwork destination directories not 
present in the artwork list (unknown Artwork).</p>
</li></ul></div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440157632"></a>Configuration file</h3></div></div></div>


<p><span class="application">xru-console</span> requires a configuration file,
named <code class="filename">xru-console-config.xml</code>, where you store the 
directories and filters for every ROM set you want to filter. The configuration
filter is an XML file. A typical configuration filter looks like this.</p>

<pre class="programlisting">
&lt;!-- Example configuration file for XBMC ROM utilities --&gt;
&lt;ROMcollections&gt;

&lt;!-- Nintendo ROMS --&gt;
&lt;collection name="SNES NoIntro" shortname="snes"&gt;
  &lt;NoIntroDat&gt;/home/xbmc/roms/DATs/SNES Parent-Clone (20140608-202038).dat&lt;/NoIntroDat&gt;
  &lt;ROMsSource&gt;/home/xbmc/roms/roms-nintendo-snes/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/xbmc/NUC-remote/ROMs/roms-nintendo-snes/&lt;/ROMsDest&gt;

  &lt;ThumbsSource&gt;/home/xbmc/roms/ArtWork/nintendo-snes-boxes/&lt;/ThumbsSource&gt;
  &lt;FanartSource&gt;/home/xbmc/roms/ArtWork/nintendo-snes-snaps/&lt;/FanartSource&gt;
  &lt;ThumbsDest  &gt;/home/xbmc/NUC-remote/ROMs/ArtWork/nintendo-snes-thumbs/&lt;/ThumbsDest&gt;
  &lt;FanartDest  &gt;/home/xbmc/NUC-remote/ROMs/ArtWork/nintendo-snes-fanart/&lt;/FanartDest&gt;

  &lt;filterUpTags&gt;Europe, World, Rev 1&lt;/filterUpTags&gt;
  &lt;filterDownTags&gt;Japan, Beta, Proto, France&lt;/filterDownTags&gt;
  &lt;includeTags&gt;Europe, USA&lt;/includeTags&gt;
  &lt;excludeTags&gt;Japan&lt;/excludeTags&gt;
&lt;/collection&gt;

&lt;!-- Sega ROMS --&gt;
&lt;collection name="Sega Mega Drive NoIntro" shortname="genesis"&gt;
  &lt;ROMsSource&gt;/home/xbmc/roms/roms-sega-genesis/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/xbmc/NUC-remote/ROMs/roms-sega-genesis/&lt;/ROMsDest&gt;

  &lt;filterUpTags&gt;Europe, World, Rev 1&lt;/filterUpTags&gt;
  &lt;filterDownTags&gt;Japan, Beta, Proto&lt;/filterDownTags&gt;
  &lt;includeTags&gt;Europe, USA&lt;/includeTags&gt;
  &lt;excludeTags&gt;Japan&lt;/excludeTags&gt;
&lt;/collection&gt;
&lt;/ROMcollections&gt; 
</pre>

<p>Every ROM collection filter requires a <strong class="userinput"><code>&lt;collection&gt;</code></strong> 
tag. The attribute <strong class="userinput"><code>shortname</code></strong> defines the name of this 
collection to be used with the commands that require a <strong class="userinput"><code>&lt;filterName&gt;</code></strong>. 
<strong class="userinput"><code>name</code></strong> attribute defines a longer name to better describe 
this ROM collection filter and it is useful if you setup different filters 
for the same ROM set.
<strong class="userinput"><code>&lt;ROMsSource&gt;</code></strong> defines the source directory 
where you have all the ROMs in your collection. 
<strong class="userinput"><code>&lt;ROMsDest&gt;</code></strong> defines the destination directory
where you filtered ROMs will be copied. Both tags are mandatory for every 
ROM collection filter.</p>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440164496"></a>Understanding ROM filters</h3></div></div></div>


<p>To use <span class="application">xru-console</span>, your ROM collection needs 
to have the No-Intro naming conventions. Only ROMs in 
<strong class="userinput"><code>.zip</code></strong> are currently supported.</p>

<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
<p>If you have a ROM collection with different naming (TOSEC, Goodtools, or
completely random names) then you can rename your ROMs with a ROM manager like
CLRMamePro or ROM Vault.</p>
</div>

<p>For example, a (very abridged) No-Intro collection for the Super Nintendo 
may look like this.</p>

<pre class="programlisting">
Super Mario All-Stars and Super Mario World (Europe).zip
Super Mario All-Stars + Super Mario World (USA)
Super Mario World (Europe) (Rev 1).zip
Super Mario World (Europe).zip
Super Mario World (Japan) (En) (Arcade) [b].zip
Super Mario World (USA).zip
Super Mario - Yossy Island (Japan) (Rev 1).zip
Super Mario - Yossy Island (Japan) (Rev 2).zip
Super Mario - Yossy Island (Japan).zip
</pre>

<p>Every ROM in the collection has a base-name and then one or
more tags. Every single tag is inside parenthesis and the most common
tags are the region where the ROM belongs: 
<strong class="userinput"><code>Europe</code></strong>, <strong class="userinput"><code>USA</code></strong> 
and/or <strong class="userinput"><code>Japan</code></strong>. Some ROMs may have complex tags, separated 
with commas, as in the following example.</p>

<pre class="programlisting">
Super Solitaire (Europe) (En,Fr,De,Es,It) (Proto).zip
Super Solitaire (USA) (En,Fr,De,Es,It).zip
</pre>

<p><span class="application">xru-console</span> is able to remove all the tags 
from the ROM name and complex tags are also separated into simpler tags.</p>

<p>For every game in the ROM collection there are usually several ROMs, 
mainly released in different regions (Europe, USA, or Japan). In your XBMC 
launcher ideally you only want one ROM for every game, corresponding to the 
ROMs in your favourite region (or regions). Also, there may be several released 
version of your ROM and you just want to play the best available one.</p>

<p><span class="application">xru-console</span> makes two passes when filtering 
the ROMs in the source directory. Firstly, tags are removed from the ROM name, 
and all ROMs that have a common name after tag removal are grouped together.
This is roughly like grouping ROMs into a parent/clone set. Note that the order 
of the ROMs in every set is arbitrary. For example, the SNES ROMs in the
example above will be grouped like this.</p>

<pre class="programlisting">
&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  Super Mario All-Stars and Super Mario World (Europe).zip | (Europe)

&lt;pcloneList&gt; "Super Mario All-Stars + Super Mario World"
  Super Mario All-Stars + Super Mario World (USA).zip      | (USA)

&lt;pcloneList&gt; "Super Mario World"
  Super Mario World (Europe) (Rev 1).zip                   | (Europe), (Rev 1)
  Super Mario World (Europe).zip                           | (Europe)
  Super Mario World (Japan) (En) (Arcade) [b].zip          | (Japan), (En), (Arcade)
  Super Mario World (USA).zip                              | (USA)

&lt;pcloneList&gt; "Super Mario - Yossy Island"
  Super Mario - Yossy Island (Japan) (Rev 1).zip           | (Japan), (Rev 1)
  Super Mario - Yossy Island (Japan) (Rev 2).zip           | (Japan), (Rev 2)
  Super Mario - Yossy Island (Japan).zip                   | (Japan)
</pre>

<p>The first pass of the filtering process uses the configured labels
<strong class="userinput"><code>&lt;filterUpTags&gt;</code></strong> and 
<strong class="userinput"><code>&lt;filterDownTags&gt;</code></strong>. For every tag you write inside
<strong class="userinput"><code>&lt;filterUpTags&gt;</code></strong>, separated with commas, every ROM on 
every parent/clone set will get some points. For example, if you write 
this.</p>

<pre class="programlisting">
&lt;filterUpTags&gt;Europe, World, Rev 1&lt;/filterUpTags&gt;
</pre>

<p>Then ROMs having the <span class="emphasis"><em>Europe</em></span> tag will get 3 points, ROMs
having the <span class="emphasis"><em>World</em></span> tag will get 2 points, and ROMs having
the <span class="emphasis"><em>Rev 1</em></span> tag will get one point. If a ROM has several
wanted tags then it will get more points. Note that the tags you want more
should be placed first.</p>

<p>The <strong class="userinput"><code>&lt;filterDownTags&gt;</code></strong> filters works in a similar
way, but instead of adding points to the score it subtracts points. For 
example, the following filter.</p>

<pre class="programlisting">
&lt;filterDownTags&gt;Japan, Beta, Proto, France&lt;/filterDownTags&gt;
</pre>

<p>Will subtract -4 points for ROMs having the tag <span class="emphasis"><em>Japan</em></span>,
-3 points for the ROMs having the tag <span class="emphasis"><em>Beta</em></span>, and so on. In
the case of this filter, you specify ROMs you don not want first. Following with 
the example, if the filters are applied to our ROM list, then the scores will 
be.</p>

<pre class="programlisting">
&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  3 | Super Mario All-Stars and Super Mario World (Europe).zip | (Europe)

&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  0 | Super Mario All-Stars + Super Mario World (USA).zip      | (USA)

&lt;pcloneList&gt; "Super Mario World"
  4 | Super Mario World (Europe) (Rev 1).zip                   | (Europe), (Rev 1)
  3 | Super Mario World (Europe).zip                           | (Europe)
  0 | Super Mario World (USA).zip                              | (USA)
 -4 | Super Mario World (Japan) (En) (Arcade) [b].zip          | (Japan), (En), (Arcade)
 
&lt;pcloneList&gt; "Super Mario - Yossy Island"
 -2 | Super Mario - Yossy Island (Japan) (Rev 1).zip           | (Japan), (Rev 1)
 -3 | Super Mario - Yossy Island (Japan) (Rev 2).zip           | (Japan), (Rev 2)
 -3 | Super Mario - Yossy Island (Japan).zip                   | (Japan)
</pre>

<p>After scoring the ROMs, the first pass of the filtering takes the ROM 
with highest score on every set. If more than one ROM have the same highest 
score, then the first ROM in the list is selected. Following with the example, 
after the first filter the ROM collection will look like this.</p>

<pre class="programlisting">
&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  3 | Super Mario All-Stars and Super Mario World (Europe).zip | (Europe)

&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  0 | Super Mario All-Stars + Super Mario World (USA).zip      | (USA)

&lt;pcloneList&gt; "Super Mario World"
  4 | Super Mario World (Europe) (Rev 1).zip                   | (Europe), (Rev 1)
 
&lt;pcloneList&gt; "Super Mario - Yossy Island"
 -2 | Super Mario - Yossy Island (Japan) (Rev 1).zip           | (Japan), (Rev 1)
</pre>

<p>Out of a total of 9 ROMs, so far only 4 will be copied into the
destination directory.</p>

<p>The second part of the filtering process allows you to remove
unwanted ROMs with specific tags. Users in Europe or USA normally do not want 
Japanese ROMs at all. To remove ROMs belonging to the Japanese region 
configure.</p>

<pre class="programlisting">
&lt;includeTags&gt;Europe, USA&lt;/includeTags&gt;
&lt;excludeTags&gt;Japan&lt;/excludeTags&gt;
</pre>

<p>This filter will exclude all ROMs with the tag <span class="emphasis"><em>Japan</em></span>, 
but only if the ROM has not the tags <span class="emphasis"><em>Europe</em></span> or 
<span class="emphasis"><em>USA</em></span>. This is to prevent filtering ROMs with
tags like <span class="emphasis"><em>(Japan, USA)</em></span> or <span class="emphasis"><em>(Japan, 
Europe)</em></span>. After the second pass of the filtering process, the 
filtering is over and the list of ROMs to be copied to the destination directory
will look like this.</p>

<pre class="programlisting">
&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  3 | Super Mario All-Stars and Super Mario World (Europe).zip | (Europe)

&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  0 | Super Mario All-Stars + Super Mario World (USA).zip      | (USA)

&lt;pcloneList&gt; "Super Mario World"
  4 | Super Mario World (Europe) (Rev 1).zip                   | (Europe), (Rev 1)
</pre>

<p>The list of tags for every ROM collection can be displayed with the
<strong class="userinput"><code>list-tags</code></strong> command, which also prints how many ROMs
in the collection have that tag. This command is very handy to know which tags
to put in the configuration file for that ROM collection. Note that if a ROM 
has more than one tag it will be counted twice. For example:</p>

<pre class="screen">
$ ./xru-console.py list-tags snes
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Listing tags]
Filter name = snes
[Tag histogram]
...
   104  Fr
   120  En
   173  Rev 1
   191  BS
   220  Beta
   626  Europe
   968  USA
  1925  Japan
</pre>

<p>Before you copy/update your filtered ROM collection, you may
want to check what will happen and the <strong class="userinput"><code>check-filter</code></strong> 
command does precisely this. For example:
</p>

<pre class="screen">
$ ./xru-console.py check-filter snes
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Check-filter ROM]
Filter name = snes
Using No-Intro parent/clone DAT
Parsing No-Intro XML DAT
Parsing No-Intro XML file ./Nintendo - SNES Parent-Clone (20140608-202038).dat...  done
Total number of games = 3366
Number of parents = 1828
Number of clones = 1538
[Filtering ROMs]
...
&lt;ROM set&gt; Super Mario All-Stars + Super Mario World
   0 [IH] Super Mario All-Stars + Super Mario World (USA).zip
&lt;ROM set&gt; Super Mario All-Stars and Super Mario World
   7 [IH] Super Mario All-Stars and Super Mario World (Europe).zip
...
&lt;ROM set&gt; Super Mario Kart
   7 [IH] Super Mario Kart (Europe).zip
   0 [IH] Super Mario Kart (USA).zip
  -3 [EH] Super Mario Kart (Japan).zip
&lt;ROM set&gt; Super Mario RPG
  -3 [EH] Super Mario RPG (Japan).zip
&lt;ROM set&gt; Super Mario RPG - Legend of the Seven Stars
   0 [IH] Super Mario RPG - Legend of the Seven Stars (USA).zip
...
</pre>

<p>Have a look at the end of next section for a quick explanation of
the flags and numbers in this listing.</p>

</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440164752"></a>No-Intro One ROM-One Game (1R1G) DATs</h3></div></div></div>


<p>The first pass of the filtering process groups different versions of
the same game together. However, based only on the ROM names this process is 
far from perfect and will produce wrong results for some games. For example:</p>

<pre class="programlisting">
&lt;pcloneList&gt; "Super Mario All-Stars and Super Mario World"
  Super Mario All-Stars and Super Mario World (Europe).zip | (Europe)

&lt;pcloneList&gt; "Super Mario All-Stars + Super Mario World"
  Super Mario All-Stars + Super Mario World (USA).zip      | (USA)
</pre>

<p>Will be grouped into different parent/clone sets, however it is clear
that they are just the European and USA version of the same game. Actually,
this example (however real) is not very common. Most of the games belonging to 
the same set having different name are the Japanese versions of the game.</p>

<p>For many users, the basic filtering will be fine. However, for
picky users this problem may be solved using the No-Intro One ROM-One 
Game (1G1R) DATs. A typical No-Intro DAT looks like this.</p>

<pre class="programlisting">
game (
  name "Sonic The Hedgehog (Japan, Korea)"
  description "Sonic The Hedgehog (Japan, Korea)"
  rom ( name "Sonic The Hedgehog (Japan, Korea).md" size 524288 crc AFE05EEE )
)

game (
  name "Sonic The Hedgehog (USA, Europe)"
  description "Sonic The Hedgehog (USA, Europe)"
  rom ( name "Sonic The Hedgehog (USA, Europe).md" size 524288 crc F9394E97 flags verified )
)
</pre>

<p>However, from <a class="ulink" href="http://datomatic.no-intro.org/" target="_top">DAT-o-MATIC</a> 
a No-Intro DAT in XML format having proper parent/clone lists are available. This is also
referred to as a 1G1R list. To download a 1G1R XML DAT for your favourite system,
go to <a class="ulink" href="http://datomatic.no-intro.org/" target="_top">DAT-o-MATIC</a>, click
on the <strong class="userinput"><code>P/Clone XML</code></strong> link, select your console system
in the drop-box on the top, and finally click on the 
<strong class="userinput"><code>Download</code></strong> button. This is how a 1G1R XML DAT looks like.</p>

<pre class="programlisting">
&lt;game name="Sonic The Hedgehog (USA, Europe)"&gt;
  &lt;description&gt;Sonic The Hedgehog (USA, Europe)&lt;/description&gt;
  &lt;release name="Sonic The Hedgehog" region="EUR"/&gt;
  &lt;release name="Sonic The Hedgehog" region="USA"/&gt;
  &lt;rom name="Sonic The Hedgehog (USA, Europe).md" size="524288" crc="F9394E97" status="verified"/&gt;
&lt;/game&gt;
&lt;game name="Sonic The Hedgehog (Japan, Korea)" cloneof="Sonic The Hedgehog (USA, Europe)"&gt;
  &lt;description&gt;Sonic The Hedgehog (Japan, Korea)&lt;/description&gt;
  &lt;release name="Sonic The Hedgehog" region="JPN"/&gt;
  &lt;release name="Sonic The Hedgehog" region="KOR"/&gt;
  &lt;rom name="Sonic The Hedgehog (Japan, Korea).md" size="524288" crc="AFE05EEE"/&gt;
&lt;/game&gt;
</pre>

<p>If you pay attention, there is a <strong class="userinput"><code>cloneof</code></strong> attribute 
on every clone ROM in the collection. This allows 
<span class="application">xru-console</span> to make a perfect parent/clone list 
before applying filters, and this will produce a better filtered list.</p>

<p>In order to use a No-Intro 1G1R XML DAT 
with <span class="application">xru-console</span>, you need to configure the 
following option for every collection filter where you want to use it. Make
sure you use the correct XML DAT for the collection!</p>

<pre class="programlisting">
&lt;collection&gt;
...
  &lt;NoIntroDat&gt;./Sega - Genesis Parent-Clone (20140601).dat&lt;/NoIntroDat&gt;
...
&lt;/collection&gt;
</pre>

<p>In No-Intro 1G1R mode, <span class="application">xru-console</span> makes the
main parent/clone list using the XML DAT instead of scanning you source 
directory. Then, the two pass filtering is applied in a similar way. Finally, 
your source directory will be scanned and for every ROM set in the 
parent/clone list, the ROM with highest score will be copied into the
destination directory. If you do not have that ROM, then the second ROM
in the scored ROM set will be tried, and so on.</p>

<p>In No-Intro 1G1R mode, two additional commands are available. 
<strong class="userinput"><code>list-nointro &lt;romSetName&gt;</code></strong> lists all the games in the
No-Intro 1G1R XML DAT. For example:</p>

<pre class="screen">
$ ./xru-console.py list-nointro genesis
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Listing No-Intro XML DAT]
Filter name = genesis
Parsing No-Intro XML DAT
Parsing No-Intro merged XML file ./Sega - Genesis Parent-Clone (20140601).dat...  done
...
&lt;game&gt; Sonic The Hedgehog (USA, Europe)
&lt;game&gt; Sonic The Hedgehog (Japan, Korea)
&lt;game&gt; Sonic The Hedgehog 2 (World) (Rev A)
&lt;game&gt; Sonic The Hedgehog 2 (World)
&lt;game&gt; Sonic The Hedgehog 2 (World) (Beta)
&lt;game&gt; Sonic The Hedgehog 3 (Europe)
&lt;game&gt; Sonic The Hedgehog 3 (Japan, Korea)
&lt;game&gt; Sonic The Hedgehog 3 (USA)
...
&lt;game&gt; Zoop (USA)
Number of games = 1681
</pre>

<p><strong class="userinput"><code>check-nointro &lt;romSetName&gt;</code></strong> will scan you source 
directory and will report how many ROMs you have, how many ROMs you don't 
have (missing ROMs), and how many ROMs you have not listed in the 
DAT (unknown ROMs).</p>

<pre class="screen">
$ ./xru-console.py check-nointro genesis-local-nointro
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Checking ROMs with No-Intro XML DAT]
Filter name = genesis-local-nointro
Parsing No-Intro XML DAT
Parsing ./DAT-No-Intro/Sega - Genesis Parent-Clone (20140601-111936).dat...  done
[Scanning ROMs in sourceDir]
[Report]
Games in DAT = 1681
Have ROMs    = 1681
Missing ROMs = 0
Unknown ROMs = 47
</pre>

<p>If you specify the option <strong class="userinput"><code>-v</code></strong>,  
<span class="application">xru-console</span> will print the missing and unknown ROMs.
<strong class="userinput"><code>-vv</code></strong> will also print the ROMs you have.</p>

<p>Note that <span class="application">xru-console</span> only looks at the 
file name of the ROM! It does not check the ROM checksum like more advanced 
ROM Managers, for example <span class="application">CRLMamePro</span> or 
<span class="application">ROM Vault</span>.</p>

<p>Before you copy/update your filtered ROM collection, you may
want to check what will happen and the <strong class="userinput"><code>check-filter</code></strong> 
command does precisely that. For example:
</p>

<pre class="screen">
$ ./xru-console.py check-filter snes
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Check-filter ROM]
Filter name = snes
Using No-Intro parent/clone DAT
Parsing No-Intro XML DAT
Parsing No-Intro XML file ./Nintendo - SNES Parent-Clone (20140608-202038).dat...  done
Total number of games = 3366
Number of parents = 1828
Number of clones = 1538
[Filtering ROMs]
...
&lt;ROM set&gt; Super Mario All-Stars and Super Mario World
   7 [IH] Super Mario All-Stars and Super Mario World (Europe).zip
   0 [IH] Super Mario All-Stars + Super Mario World (USA).zip
...
&lt;ROM set&gt; Super Mario RPG - Legend of the Seven Stars
   0 [IH] Super Mario RPG - Legend of the Seven Stars (USA).zip
  -3 [EH] Super Mario RPG (Japan).zip
&lt;ROM set&gt; Super Mario World
  11 [IH] Super Mario World (Europe) (Rev 1).zip
   7 [IH] Super Mario World (Europe).zip
   0 [IH] Super Mario World (USA).zip
  -3 [EH] Super Mario World (Japan) (En) (Arcade) [b].zip
  -3 [EH] Super Mario World - Super Mario Bros. 4 (Japan).zip
...|  ||
   |  |+-- Have flag
   |  +--- Included flag
   +------ Score
</pre>

<p>In this ROM listing, you can see the parent/clone sets, the score of each
ROM, if the ROM is included or excluded, and if the ROM exists in the source
directory or not. Note that if you use a No-Intro XML DAT you may have missing
ROMs. However, if you don not use the DAT, then <span class="emphasis"><em>you will always have
all the ROMs</em></span> in this list.</p>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440194464"></a>Updating/Copying filtered ROMs</h3></div></div></div>


<p>Once you have setup your configuration file and checked the filter
output (note that you can configure several filters for the
same ROM source directory, for example, to place Europe/USA games and
Japanese game into different destination directories) then it is time to
copy your filtered ROMs from the source directory into the destination
directory.</p>

<p>The <strong class="userinput"><code>copy &lt;romSetName&gt;</code></strong> command will filter
your ROMs and then copy, one by one, every filtered ROM into the
destination directory.</p>

<pre class="screen">
$ ./xru-console.py copy genesis
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Copy/Update ROMs]
Filter name = genesis-local
Using directory listing
[Reading ROMs in source dir]
Found 1728 ROMs
[Filtering ROMs]
[Scanning sourceDir for ROMs to be copied]
[Creating list of ROMs to be copied/updated]
[Copying ROMs into destDir]
  0% &lt;Copied&gt; 10 Super Jogos (Brazil).zip
  0% &lt;Copied&gt; 16 Zhang Ma Jiang (China) (Unl).zip
  0% &lt;Copied&gt; 3 Ninjas Kick Back (USA).zip
...
 99% &lt;Copied&gt; [BIOS] Sega CD 2 (USA) (v2.00W).zip
 99% &lt;Copied&gt; [BIOS] Sega TMSS (World).zip
 99% &lt;Copied&gt; [BIOS] X'Eye (USA) (v2.00).zip
[Report]
Copied 962 ROMs
</pre>

<p>The <strong class="userinput"><code>update &lt;romSetName&gt;</code></strong> command operates
in a similar way to <strong class="userinput"><code>copy</code></strong>. However, rather than
copying all the ROMs, each ROMs in sourceDir is compared with the same
named ROM in destDir, and the file will be copied only if the destination
ROM does not exist or the file sizes are different. This is very
useful when you destination directory is network-mounted.</p>

<pre class="screen">
$ ./xru-console.py update genesis --cleanROMs
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Copy/Update ROMs]
Filter name = genesis
Using No-Intro parent/clone DAT
Parsing No-Intro XML DAT
Parsing No-Intro XML file ./Sega - Genesis Parent-Clone (20140601-111936).dat...  done
Total number of games = 1681
Number of parents = 1010
Number of clones = 671
[Filtering ROMs]
[Scanning sourceDir for ROMs to be copied]
[Creating list of ROMs to be copied/updated]
[Updating ROMs into destDir]
  0% &lt;Copied &gt; Action 52 (USA) (Alt 1) (Unl).zip
 31% &lt;Copied &gt; Gain Ground (World) (Alt 1).zip
 32% &lt;Copied &gt; Ghostbusters (World).zip
 35% &lt;Copied &gt; HardBall III (USA) (Unl).zip
...
 98% &lt;Copied &gt; Zany Golf (USA, Europe).zip
 99% &lt;Copied &gt; [BIOS] LaserActive (USA) (v1.02).zip
[Report]
Copied ROMs     47
Updated ROMs   821
[Cleaning ROMs in ROMsDest]
&lt;Deleted&gt; ATP Tour Championship Tennis (USA).zip
&lt;Deleted&gt; Action 52 (USA) (Unl).zip
...
&lt;Deleted&gt; [BIOS] Sega CD 2 (USA) (v2.00W).zip
Deleted 122 redundant ROMs
</pre>

<p>By default, only the newly copied files are displayed during the update
process. If you want to check also the updated files, then use the
option <strong class="userinput"><code>-v</code></strong> in the command line.</p>

<p>With both <strong class="userinput"><code>copy</code></strong> and <strong class="userinput"><code>update</code></strong> 
commands, you can use the flags <strong class="userinput"><code>--dryRun</code></strong>,
<strong class="userinput"><code>--cleanROMs</code></strong> and <strong class="userinput"><code>--cleanNFO</code></strong>.</p>

<p><strong class="userinput"><code>--dryRun</code></strong> will not perform any operation in your
files. Use this flag if you want to test what would happened with your ROMs,
and if you are happy with the results execute 
<span class="application">xru-console</span> without <strong class="userinput"><code>--dryRun</code></strong>
option. Note that if you use <strong class="userinput"><code>--dryRun</code></strong>, 
<strong class="userinput"><code>--cleanROMs</code></strong> and <strong class="userinput"><code>--cleanNFO</code></strong> will
show you inaccurate outcomes, since the destination directory is not modified.</p>

<p><strong class="userinput"><code>--cleanROMs</code></strong> will delete any unknown ROMs in the
destination directory. After copying/update the filtered ROMs, the
destination directory will be scanned and any ROM found not in the list of
filtered ROMs will be deleted. Use this with caution! The list of deleted ROMs 
in destDir is always printed.</p>

<p>Both <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=85724" target="_top">Advanced Launcher</a> 
and <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=70115" target="_top">ROM Collection Browser</a> 
create NFO files having the scrapped ROM information, like year of the release,
genre, etc. Use the <strong class="userinput"><code>--cleanNFO</code></strong> to remove any unknown
NFO files, in a similar way to the <strong class="userinput"><code>--cleanROMs</code></strong> flag. The
list of deleted NFO files in destDir is always printed.</p>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440217008"></a>Art Work</h3></div></div></div>


<p>Both <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=85724" target="_top">Advanced Launcher</a> 
and <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=70115" target="_top">ROM Collection Browser</a> 
have good scrapers that will download most of the artwork for your ROMs. However, 
the scraping process may be very slow for huge ROM collections (for example, a 
collection having 2,000 ROMs may take up to 10 hours to scrap). This problem may be 
solved if you have locally available collections of artwork. 
<span class="application">xru-console</span> can copy the matching artwork for your 
filtered collection in the directories you specify, and then you can choose 
the offline scraper that simply reads those files from the disk instead of 
downloading them from the Internet.</p>

<p><span class="application">xru-console</span> currently uses two types of 
artwork files, named <strong class="userinput"><code>thumbs</code></strong> and 
<strong class="userinput"><code>fanart</code></strong>, which correspond with the two artwork categories 
used by <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=85724" target="_top">Advanced Launcher</a>. 
Roughly speaking, thumbs are images that will be displayed for every game in
a prominent position (this is XBMC skin and listing-mode dependant) and
fanart will appear as a background. You can think of the thumbs as the game box
and the fanart as the in-game screenshot.</p>

<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3>Artwork must have .png extension (lowercase).</div>

<p>Full collections of No-Intro ROMs exist out there. However, it is very
difficult to find a <span class="emphasis"><em>complete</em></span> artwork collection that
have boxes/screenshots/titles. Partial artwork collections are available, although.
To overcome this problem, <span class="application">xru-console</span> will
try to replace any missing piece of artwork with another one belonging to
the same parent/clone set of the filtered ROM, in the case you have a partial
artwork set which does not belong to the region of the ROMs you are filtering. 
We will see how this works later with an example.</p>

<p>If you have local Artwork available and want to copy it into destination
folders (synchronised with your filtered ROM list), then configure the following
into your ROM collection</p>

<pre class="programlisting">
&lt;collection&gt;
...
  &lt;ThumbsSource&gt;/home/xbmc/roms/ArtWork/nintendo-snes-boxes/&lt;/ThumbsSource&gt;
  &lt;FanartSource&gt;/home/xbmc/roms/ArtWork/nintendo-snes-snaps/&lt;/FanartSource&gt;
  &lt;ThumbsDest  &gt;/home/xbmc/NUC/ROMs/ArtWork/nintendo-snes-thumbs/&lt;/ThumbsDest&gt;
  &lt;FanartDest  &gt;/home/xbmc/NUC/ROMs/ArtWork/nintendo-snes-fanart/&lt;/FanartDest&gt;
...
&lt;/collection&gt;
</pre>

<p>You may check you configuration with the
<strong class="userinput"><code>check-artwork &lt;romSetName&gt;</code></strong> command. For example:</p>

<pre class="screen">
$ ./xru-console.py check-artwork genesis
XBMC ROM utilities - Console ROMsESC[0m version 0.1.0
[Parsing config file]
[Check-ArtWork]
Filter name = genesis
Using No-Intro parent/clone DAT
Parsing No-Intro XML DAT
Parsing No-Intro XML file ./Sega - Genesis Parent-Clone (20140601-111936).dat...  done
Total number of games = 1681
Number of parents = 1010
Number of clones = 671
[Optimising ArtWork file list]
[Updating ArtWork]
...
&lt;&lt;  ROM  &gt;&gt; Sonic The Hedgehog (USA, Europe).zip
 Original   Sonic The Hedgehog (USA, Europe)
 Have T     Sonic The Hedgehog (USA, Europe).png
 Have F     Sonic The Hedgehog (USA, Europe).png
...
&lt;&lt;  ROM  &gt;&gt; Speedball 2 (Europe).zip
 Replaced   Speedball 2 - Brutal Deluxe (USA)
 Have T     Speedball 2 - Brutal Deluxe (USA).png
 Have F     Speedball 2 - Brutal Deluxe (USA).png
...
&lt;&lt;  ROM  &gt;&gt; [BIOS] X'Eye (USA) (v2.00).zip
 Not found
[Report]
Number of ROMs in destDir  = 868
Number of ArtWork found    = 722
Number of original ArtWork = 179
Number of replaced ArtWork = 543
Number of have Thumbs    = 722
Number of missing Thumbs = 0
Number of have Fanart    = 707
Number of missing Fanart = 15
</pre>

<p>Note that for the game <span class="emphasis"><em>Speedball 2</em></span> no artwork was
found for the filtered game in destDir. However, a replacement belonging to
another ROM in the set was found. Some other ROMs, particularly BIOSes,
won't have any artwork and will produce a miss.</p>

<p>When you are happy with the results, you can copy/update your
Artwork with the commands <strong class="userinput"><code>copy-artwork &lt;romSetName&gt;</code></strong>
and <strong class="userinput"><code>update-artwork &lt;romSetName&gt;</code></strong>. You can use the
<strong class="userinput"><code>--cleanArtWork</code></strong> flag if you want to delete
unknown Artwork into the thumbs and fanart destination directories. For example:</p>

<pre class="screen">
$ ./xru-console.py update-artwork genesis --cleanArtWork
XBMC ROM utilities - Console ROMs version 0.1.0
[Parsing config file]
[Updating/copying ArtWork]
Filter name = genesis
Using No-Intro parent/clone DAT
Parsing No-Intro XML DAT
Parsing No-Intro XML file ./Sega - Genesis Parent-Clone (20140601-111936).dat...  done
Total number of games = 1681
Number of parents = 1010
Number of clones = 671
[Optimising ArtWork file list]
[Updating ArtWork]
  1% &lt;Missing Fanart&gt; Adventurous Boy - Mao Xian Xiao Zi (China) (Unl)
  5% &lt;Missing Fanart&gt; Awesome Possum Kicks Dr Machino's Butt! (USA) (Beta)
...
 96% &lt;Missing Fanart&gt; World Series Baseball 98 (USA)
[Report]
Copied thumbs      0
Updated thumbs   722
Missing thumbs     0
Copied fanart      0
Updated fanart   707
Missing fanart    15
[Cleaning ArtWork]
Deleted 0 redundant thumbs
Deleted 0 redundant fanart
</pre>
</div>
</div>


<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp440248816"></a><span class="application">xru-mame</span></h2></div></div></div>


<pre class="screen">
$ xru-mame.py [options] &lt;command&gt; [filterName]
</pre>

<p>The following commands are supported.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>usage</code></strong></p>
<p>prints a summary of the commands and options.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>reduce-XML</code></strong></p>
<p>Takes <span class="application">MAME</span> XML as input, picks the useful 
information, and writes an stripped XML with only meaningful information. The 
reason for doing this is because <span class="application">MAME</span> XML file 
is huge and takes a long time to process it. After reducing it, all subsequent 
processing should be much quicker.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>merge</code></strong></p>
<p>Takes MAME XML (reduced) info file and Catver.ini and makes an output XML
file with all the necessary information for proper game filtering.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list-merged</code></strong></p>
<p>List every ROM set system defined in the merged MAME XML information file.
Use <strong class="userinput"><code>--verbose</code></strong> to get more information.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list-categories</code></strong></p>
<p>Reads <code class="filename">Catver.ini</code> and makes a histogram of the categories 
(prints all available categories and tells how many ROMs every category has).</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list-drivers</code></strong></p>
<p>Reads merged XML database and prints a histogram of the drivers (how many
games use each driver).</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>check-filter &lt;filterName&gt;</code></strong></p>
<p>Applies filters and checks you source directory for have and missing 
ROMs.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>copy &lt;filterName&gt;</code></strong></p>
<p>Applies ROM filters defined in the configuration file and copies the
contents of sourceDir into destDir. This overwrites ROMs in destDir.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>update &lt;filterName&gt;</code></strong></p>
<p>Like copy, but only copies files if file size is different (this saves
a lot of time, particularly if sourceDir and/or destDir are on a
network-mounted filesystem).</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>check-artwork &lt;filterName&gt;</code></strong></p>
<p>Reads the ROMs in destDir, checks if you have the corresponding artwork
files, and prints a report.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>copy-artwork &lt;filterName&gt;</code></strong></p>
<p>Reads the ROMs in destDir and tries to copy the matching artwork to 
the destination directory.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>update-artwork &lt;filterName&gt;</code></strong></p>
<p>Like copy-artwork, but only copies images if file sizes are different. 
This may save a lot of time.</p>
</li></ul></div>

<p>The following options are supported.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>-h, --help</code></strong></p>
<p>Print short command reference</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>-v, --verbose</code></strong></p>
<p>Print more information about what's going on</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>-l, --log</code></strong></p>
<p>Save program output in <code class="filename">xru-mame-log.txt</code>.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>--logto [logName]</code></strong></p>
<p>Save program output in the file you specify.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>--dryRun</code></strong></p>
<p>Don't modify destDir at all, just print the operations to be done.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>--cleanROMs</code></strong></p>
<p>Deletes ROMs in destDir not present in the filtered ROM list.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>--generateNFO</code></strong></p>
<p>Generates NFO files with game information for the launchers.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>--cleanNFO</code></strong></p>
<p>Deletes unknown NFO files in the destination directory.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>--cleanArtWork</code></strong></p>
<p>Deletes unknown ArtWork in destination directories.</p>
</li></ul></div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440285856"></a>Configuration file</h3></div></div></div>


<p><span class="application">xru-mame</span> requires a configuration file,
named <code class="filename">xru-mame-config.xml</code>, 
where you setup the ROM directories and filters. A typical 
configuration filter looks like this.</p>

<pre class="programlisting">
&lt;!-- Example configuration file for XBMC ROM utilities --&gt;
&lt;MAMEConfig&gt;
&lt;General&gt;
  &lt;MAME_XML      &gt;./DAT-mame/mame-0153.xml&lt;/MAME_XML&gt;
  &lt;MAME_XML_redux&gt;./DAT-mame/mame-0153-reduced.xml&lt;/MAME_XML_redux&gt;
  &lt;Catver        &gt;./DAT-mame/Catver.ini&lt;/Catver&gt;
  &lt;MergedInfo    &gt;./DAT-mame/mame-0153-reduced.xml&lt;/MergedInfo&gt;
&lt;/General&gt;

&lt;MAMEFilter name="main"&gt;
  &lt;ROMsSource&gt;/home/xbmc/roms/roms-mame/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/xbmc/NUC-remote/ROMs/roms-mame-main/&lt;/ROMsDest&gt;

  &lt;ThumbsSource&gt;/home/xbmc/roms/ArtWork/nintendo-snes-boxes/&lt;/ThumbsSource&gt;
  &lt;FanartSource&gt;/home/xbmc/roms/ArtWork/nintendo-snes-snaps/&lt;/FanartSource&gt;
  &lt;ThumbsDest  &gt;/home/xbmc/NUC-remote/ROMs/ArtWork/nintendo-snes-thumbs/&lt;/ThumbsDest&gt;
  &lt;FanartDest  &gt;/home/xbmc/NUC-remote/ROMs/ArtWork/nintendo-snes-fanart/&lt;/FanartDest&gt;

  &lt;!-- Main filter --&gt;
  &lt;!-- Main filter options:
       NoClones, NoSamples, NoMechanical, NoNonworking
  --&gt;
  &lt;MainFilter&gt;NoClones, NoSamples, NoMechanical, NoNonworking&lt;/MainFilter&gt;

  &lt;!-- MAME drivers --&gt;
  &lt;!-- Important drivers:
       neogeo    Neo-Geo
       cps1      Capcom CPS1
       cps2      Capcom CPS2
       cps3      Capcom CPS3
       model1    Sega Model 1
       namcos11  Namco System 11
  --&gt;
  &lt;!-- NOTE: this filter implies OR conditions between filtering options --&gt;
  &lt;!-- Example: [is] not cps1 OR [is] not cps2 --&gt;
  &lt;Driver&gt;not cps1&lt;/Driver&gt;

  &lt;!-- Categories --&gt;
  &lt;!-- Some categories you probably don't want
       Mature, Casino, PinMAME, Fruit Machines
  --&gt;
  &lt;!-- NOTE: this filter implies OR conditions between filtering options --&gt;
  &lt;!-- Example: [is] not Mature OR [is] not Casino --&gt;
  &lt;Categories&gt;not Mature, not Casino, not PinMAME, not Fruit Machines&lt;/Categories&gt;
&lt;/MAMEFilter&gt;

&lt;MAMEFilter name="cps1"&gt;
  &lt;ROMsSource&gt;/home/xbmc/roms/roms-mame/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/xbmc/NUC-remote/ROMs/roms-mame-cps1/&lt;/ROMsDest&gt;

  &lt;MainFilter&gt;NoClones, NoSamples, NoMechanical&lt;/MainFilter&gt;
  &lt;Driver&gt;cps1&lt;/Driver&gt;
&lt;/MAMEFilter&gt;
&lt;/MAMEConfig&gt; 
</pre>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="create_mame_database"></a>Creating the <span class="application">MAME</span> ROM database</h3></div></div></div>


<p>The first step before games can be filtered is to create a 
<span class="application">MAME</span> game database that 
<span class="application">xru-mame</span> can use. First, check what is your 
<span class="application">MAME</span> version with the following command.</p>

<pre class="screen">
$ mame -?
M.A.M.E. v0.153 (Apr  7 2014) - Multiple Arcade Machine Emulator
Copyright Nicola Salmoria and the MAME team

MAME is an emulator: it reproduces, more or less faithfully, the behaviour of
...

For usage instructions, please consult the files config.txt and windows.txt.
</pre>

<p>In this example <span class="application">MAME</span> has the version number
0.153. This number will be used in the configuration files so when you get
a new version of <span class="application">MAME</span> you won't mess up game
databases.</p>

<p>Next, create the <span class="application">MAME</span> XML game database. Execute
the following command to place the XML database into <code class="filename">mame-0153.xml</code>:</p>

<pre class="screen">
$ mame -listxml &gt; mame-0153.xml
</pre>

<p>Now, create a basic <code class="filename">xru-mame-config.xml</code> configuration 
file. Note that in this example all the <span class="application">MAME</span> related 
game databases will be stored in the directory <code class="filename">DAT-mame</code> 
placed where you have the <code class="filename">xru-mame.py</code> script for
convenience.</p>

<pre class="programlisting">
&lt;MAMEConfig&gt;
&lt;General&gt;
  &lt;MAME_XML      &gt;./DAT-mame/mame-0153.xml&lt;/MAME_XML&gt;
  &lt;MAME_XML_redux&gt;./DAT-mame/mame-0153-reduced.xml&lt;/MAME_XML_redux&gt;
  &lt;Catver        &gt;./DAT-mame/Catver.ini&lt;/Catver&gt;
  &lt;MergedInfo    &gt;./DAT-mame/mame-0153-reduced-merged.xml&lt;/MergedInfo&gt;
&lt;/General&gt;
&lt;/MAMEConfig&gt;
</pre>

<p><span class="application">MAME</span> XML game database is huge and has much more
information than needed for game filtering. Next, the game database will be "reduced",
that is, non-relevant information will be stripped off and a shorted game database
will be created (named <code class="filename">mame-0153-reduced.xml</code> in the above 
configuration file example. Execute:</p>

<pre class="screen">
$ ./xru-mame.py reduce-XML
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Reducing MAME XML game database]
Reading MAME XML game database...
NOTE: this will take a looong time...
Parsing MAME XML file ./DAT-mame/mame-0153.xml...   done
Reducing MAME XML database...
Building reduced output XML file...
Writing reduced XML file ./DAT-mame/mame-0153-reduced.xml
</pre>

<p>Please be patient! This reduction process will take several minutes and
about 2 GB of RAM will be used. However, all subsequent commands will be much
faster. The reduction will shrink <code class="filename">mame-0153.xml</code> to 
<code class="filename">mame-0153-reduce.xml</code> from 147 MB to 12 MB.</p>

<p>Next, download the file <code class="filename">Catver.ini</code> from 
<a class="ulink" href="http://www.progettoemma.net/?catlist" target="_top">Progetto EMMA</a>
(make sure you get the English version) and place it in the 
<code class="filename">DAT-mame</code> directory. The following command 
will merge <code class="filename">mame-0153-reduce.xml</code> with 
<code class="filename">Catver.ini</code> to create 
<code class="filename">mame-0153-reduced-merged.xml</code> and then your are done.
Execute:
</p>

<pre class="screen">
$ ./xru-mame.py merge
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Building merged MAME filter database]
[Parsing Catver.ini]
[Parsing (reduced) MAME XML file]
Parsing MAME XML file ./DAT-mame/mame-0153-reduced.xml...   done
[Merging MAME XML and categories]
[WARNING] Category not found for game 18wheelu
...
[WARNING] Category not found for game avg_tomcat
[Writing output file]
Output file ./DAT-mame/mame-0153-reduced-merged.xml
</pre>

<p>If you get some some warnings about non-found categories for some games
just ignore them. You can now list the games in your merged XML database.</p>

<pre class="screen">
$ ./xru-mame.py list-merged
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Short listing of reduced MAME XML]
Parsing merged MAME XML file './DAT-mame/mame-0153-reduced-merged.xml'...  done
005
|-- driver = segag80r.c
|-- sampleof = 005
|-- description = 005
|-- year = 1981
|-- manufacturer = Sega
|-- driver status = imperfect
+-- category = Maze
...
keycus_c430
|-- driver = src/mame/machine/ns11prot.c
|-- isdevice = yes
|-- description = KEYCUS C430
+-- category = System
[Report]
Number of games = 30043
Number of clones = 20210
Number of games with samples = 550
Number of devices = 794
</pre>

<p>You can print a list of the categories and how many games on each
category with the <strong class="userinput"><code>list-categories</code></strong> command.</p>

<pre class="screen">
$ ./xru-mame.py list-categories
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Listing categories from Catver.ini]
Opening ./DAT-mame/Catver.ini
[Making categories histogram]

[Final (used) categories]
    20  Climbing
...
  1342  PinMAME
  1343  Fighter
  1761  Casino
  2496  Shooter
 16779  Fruit Machines
</pre>

<p>Note that <code class="filename">Catver.ini</code> defines a main category and 
a sub-category for each game. For example:</p>

<pre class="programlisting">
[Category]
005=Maze / Shooter Small
10yard=Sports / Football Amer.
10yard85=Sports / Football Amer.
10yardj=Sports / Football Amer.
...     |        |
        |        +- Sub-category
        +---------- Main category
</pre>

<p><span class="application">xru-mame</span> only takes into account the main
category and ignores any sub-categories. For example, the game 005 will
have category Maze, 10yard Sports, etc. Also, when merging the categories
into the merged XML database some categories are renamed for convenience.</p>

<pre class="programlisting">
System / BIOS               --&gt; BIOS
Electromechanical - PinMAME --&gt; PinMAME
Ball &amp; Paddle               --&gt; Ball and Paddle
</pre>

<p>Any game that contains the category *Mature* either in the main
category or in the sub-category will be assigned to the cateogory Mature
(no * in the final category name). In addition to the renamed, final categories
you can see the original <code class="filename">Catver.ini</code> categories with the 
<strong class="userinput"><code>-v</code></strong> switch and even more
information with <strong class="userinput"><code>-vv</code></strong>.</p>

<p>You can list the <span class="application">MAME</span> drivers with 
the command <strong class="userinput"><code>list-drivers</code></strong> command.</p>

<pre class="screen">
$ ./xru-mame.py list-drivers
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Listing MAME drivers]
NOTE: clones are not included
Parsing merged MAME XML file './DAT-mame/mame-0153-reduced-merged.xml'...   done
[Final (used) categories]
   1  src/mame/video/tia.c
   1  calorie.c
...
 199  naomi.c
 202  jpmimpctsw.c
 259  bfm_sc5sw.c
 300  mpu5.c
 470  bfm_sc4.c
</pre>

<p>Note that you do not need to write the trailing .c when configuring
driver filters.</p>

<p>You are now ready to start filtering your 
<span class="application">MAME</span> ROMs.</p>

</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440291200"></a>Understanding <span class="application">MAME</span> filters</h3></div></div></div>


<p>In order to understand how the <span class="application">MAME</span> filters
work, a basic filter named <span class="emphasis"><em>main</em></span> will be created. Edit
your <code class="filename">xru-mame-config.xml</code> and add the following.</p>

<pre class="programlisting">
&lt;MAMEConfig&gt;
&lt;General&gt;
  &lt;MAME_XML      &gt;./DAT-mame/mame-0153.xml&lt;/MAME_XML&gt;
  &lt;MAME_XML_redux&gt;./DAT-mame/mame-0153-reduced.xml&lt;/MAME_XML_redux&gt;
  &lt;Catver        &gt;./DAT-mame/Catver.ini&lt;/Catver&gt;
  &lt;MergedInfo    &gt;./DAT-mame/mame-0153-reduced-merged.xml&lt;/MergedInfo&gt;
&lt;/General&gt;

&lt;MAMEFilter name="main"&gt;
  &lt;ROMsSource&gt;/home/wintermute/mame-roms/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/wintermute/NUC-remote/ROMs/roms-mame-main/&lt;/ROMsDest&gt;
  
  &lt;MainFilter&gt;NoClones, NoSamples, NoMechanical, NoNonworking&lt;/MainFilter&gt;
  &lt;Driver&gt;not cps1, not cps2, not cps3, not neogeo&lt;/Driver&gt;
  &lt;Categories&gt;not Mature, not Casino, not PinMAME, not Fruit Machines&lt;/Categories&gt;
&lt;/MAMEFilter&gt;
&lt;/MAMEConfig&gt;
</pre>

<p>Every <span class="application">MAME</span> filter requires a 
<strong class="userinput"><code>MAMEFilter</code></strong> tag and there the <strong class="userinput"><code>name</code></strong> attribute
defines the name you will used to invoke other command for this filter. Every 
filter require the <strong class="userinput"><code>ROMsSource</code></strong> and 
<strong class="userinput"><code>ROMsDest</code></strong> tags, which define the source
directory when you have all your ROMs and the destination directory where
filtered ROMs will be copied</p>

<p>The <span class="application">MAME</span> filtering process is done in several
steps. The first filter is configured with the tag 
<strong class="userinput"><code>&lt;MainFilter&gt;</code></strong>. Here you can write the following
filtering options.</p> 

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>NoClones</code></strong> will filter all the cloned games.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>NoSamples</code></strong> will filter all the games that use samples.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>NoMechanical</code></strong> will remove all the mechanical games. Most
of them are slot machines and do not work anyway.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>NoNonworking</code></strong> will remove all games that do not work
properly.</p>
</li></ul></div>

<p>Note that games belonging to the <strong class="userinput"><code>devices</code></strong> 
type are removed automatically. Those are not really games but 
emulated devices.</p>

<p>After the main filter comes the driver filter. This filter is controlled
with the tag <strong class="userinput"><code>&lt;Driver&gt;</code></strong>. By default all drivers
will be included. If you specify a driver, then only games belonging
to that driver will be included. You can also specify a 
<strong class="userinput"><code>not</code></strong> operator to not include games belonging
to that filter. For example:</p>

<pre class="programlisting">
...
&lt;Driver&gt;not cps1, not cps2, not cps3, not neogeo&lt;/Driver&gt;
...
</pre>

<p>will include all the games expect those belonging to
the cps1, cps2, cps3 and neogeo drivers. Remember that you can have a 
look at the available drivers with the <strong class="userinput"><code>list-drivers</code></strong>
command.</p>

<p>The last filter is the categories filter, controlled with the tag
<strong class="userinput"><code>&lt;Categories&gt;</code></strong>. This works in a similar way
to the <strong class="userinput"><code>&lt;Driver&gt;</code></strong> filter, but instead of drivers you
specify game categories. Remember that you can have a look at the
available categories with the <strong class="userinput"><code>list-categories</code></strong>
command.</p>

<p>After you have configured your source and destination directories and
your filters, you can check what games will be copied into the 
destination directory with the <strong class="userinput"><code>check-filter</code></strong> command. 
For the example, for the main filter configured above the results will be 
something like this.</p>

<pre class="screen">
$ ./xru-mame.py check-filter main
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Checking filter]
Filter name = main
[Parsing MAME merged XML]
Parsing MAME merged XML file ./DAT-mame/mame-0153-reduced-merged.xml...  done
Total number of games = 30043
Number of parents = 9833
Number of clones = 20210
[Reading ROMs in source directory]
[Applying MAME filters]
NOTE: -vv if you want to see filters in action
[Main filter]
&gt;&gt;&gt; Default filter, removing devices
Removed =   794 / Remaining = 29249
&gt;&gt;&gt; Filtering out clones
Removed = 20210 / Remaining =  9039
&gt;&gt;&gt; Filtering out games with samples
Removed =   279 / Remaining =  8760
&gt;&gt;&gt; Filtering out mechanical games
Removed =  2458 / Remaining =  6302
&gt;&gt;&gt; Filtering out Non-Working games
Removed =  2628 / Remaining =  3674
[Driver filter]
&gt;&gt;&gt; Filtering Drivers
Removed =   237 / Remaining =  3437
[Categories filter]
&gt;&gt;&gt; Filtering Categories
Removed =   739 / Remaining =  2698
&lt;Game&gt; 10yard
 Have ROM
 Description = 10-Yard Fight (World, set 1)
&lt;Game&gt; 1942
 Have ROM
 Description = 1942 (Revision B)
...
&lt;Game&gt; zzyzzyxx
 Have ROM
 Description = Zzyzzyxx (set 1)
</pre>

<p>Note than in this list only the filtered games are printed. You can see
if you have that game or not (missing ROM).</p>

<p>Once you are happy with your filter then it's time to copy your ROMs.</p>

</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440322736"></a>Updating/Copying <span class="application">MAME</span> ROMs</h3></div></div></div>


<p>The <strong class="userinput"><code>copy &lt;filterName&gt;</code></strong> command will filter
your ROMs and then copy, one by one, every filtered ROMs into the
destination directory.</p>

<pre class="screen">
$ ./xru-mame.py copy main
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Copy/Update ROMs]
Filter name = main
[Parsing MAME merged XML]
Parsing MAME merged XML file ./DAT-mame/mame-0153-reduced-merged.xml...  done
Total number of games = 30043
Number of parents = 9833
Number of clones = 20210
[Reading ROMs in source directory]
[Applying MAME filters]
NOTE: -vv if you want to see filters in action
[Main filter]
&gt;&gt;&gt; Default filter, removing devices
Removed =   794 / Remaining = 29249
&gt;&gt;&gt; Filtering out clones
Removed = 20210 / Remaining =  9039
&gt;&gt;&gt; Filtering out games with samples
Removed =   279 / Remaining =  8760
&gt;&gt;&gt; Filtering out mechanical games
Removed =  2458 / Remaining =  6302
&gt;&gt;&gt; Filtering out Non-Working games
Removed =  2628 / Remaining =  3674
[Driver filter]
&gt;&gt;&gt; Filtering Drivers
Removed =   237 / Remaining =  3437
[Categories filter]
&gt;&gt;&gt; Filtering Categories
Removed =   739 / Remaining =  2698
[Creating list of ROMs to be copied/updated]
Added 2672 ROMs
[Copying ROMs into destDir]
  0% &lt;Copied&gt; 10yard.zip
  0% &lt;Copied&gt; 1942.zip
...
 99% &lt;Copied&gt; zwackery.zip
 99% &lt;Copied&gt; zzyzzyxx.zip
[Report]
Copied ROMs   2672
</pre>

<p>The <strong class="userinput"><code>update &lt;filterName&gt;</code></strong> command operates
in a similar way to <strong class="userinput"><code>copy</code></strong>. However, rather than
copying all the ROMs, each ROMs in sourceDir is compared with the same
named ROM in destDir, and the file will be copied only if the destination
ROM does not exist or the file sizes are different. This is very
useful when you destination directory is network-mounted.</p>

<pre class="screen">
$ ./xru-mame.py update main
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Copy/Update ROMs]
Filter name = main
[Parsing MAME merged XML]
Parsing MAME merged XML file ./DAT-mame/mame-0153-reduced-merged.xml...  done
Total number of games = 30043
Number of parents = 9833
Number of clones = 20210
[Reading ROMs in source directory]
[Applying MAME filters]
NOTE: -vv if you want to see filters in action
[Main filter]
&gt;&gt;&gt; Default filter, removing devices
Removed =   794 / Remaining = 29249
&gt;&gt;&gt; Filtering out clones
Removed = 20210 / Remaining =  9039
&gt;&gt;&gt; Filtering out games with samples
Removed =   279 / Remaining =  8760
&gt;&gt;&gt; Filtering out mechanical games
Removed =  2458 / Remaining =  6302
&gt;&gt;&gt; Filtering out Non-Working games
Removed =  2628 / Remaining =  3674
[Driver filter]
&gt;&gt;&gt; Filtering Drivers
Removed =   237 / Remaining =  3437
[Categories filter]
&gt;&gt;&gt; Filtering Categories
Removed =   739 / Remaining =  2698
[Creating list of ROMs to be copied/updated]
Added 2672 ROMs
[Updating ROMs into destDir]
[Report]
Copied ROMs      0
Updated ROMs  2672
</pre>

<p>By default, only the newly copied files are displayed during the update
process. If you want to check also the updated files, then use the
option <strong class="userinput"><code>-v</code></strong> in the command line.</p>

<p>With both <strong class="userinput"><code>copy</code></strong> and <strong class="userinput"><code>update</code></strong> 
commands, you can use the flags <strong class="userinput"><code>--dryRun</code></strong> and
<strong class="userinput"><code>--cleanROMs</code></strong>.</p>

<p><strong class="userinput"><code>--dryRun</code></strong> will not perform any operation in your
files. Use this flag if you want to test what will happend with your ROMs,
and if you are happy with the results execute 
<span class="application">xru-mame</span> without <strong class="userinput"><code>--dryRun</code></strong>
option. Note that if you use <strong class="userinput"><code>--dryRun</code></strong>, 
<strong class="userinput"><code>--cleanROMs</code></strong> will
show you inaccurate outcomes, since the destination directory is not modified.</p>

<p><strong class="userinput"><code>--cleanROMs</code></strong> will delete any unknown ROM in the
destination directory. After copying/update the filtered ROMs, the
destination directory will be scanned and any ROM not found in the list of
filtered ROMs will be deleted. Use this with caution! The list of deleted ROMs 
in destDir is always printed.</p>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440360176"></a>NFO files and Artwork</h3></div></div></div>


<p>Both <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=85724" target="_top">Advanced Launcher</a> 
and <a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=70115" target="_top">ROM Collection Browser</a> 
create NFO files having the scrapped ROM information, like year of the release,
genre, etc. A typical NFO file looks like this.</p>

<pre class="screen">
&lt;?xml version="1.0" ?&gt;
&lt;game&gt;
  &lt;title&gt;Toki (World, set 1)&lt;/title&gt;
  &lt;platform&gt;MAME&lt;/platform&gt;
  &lt;year&gt;1989&lt;/year&gt;
  &lt;publisher&gt;TAD Corporation&lt;/publisher&gt;
  &lt;genre&gt;Platform&lt;/genre&gt;
  &lt;plot/&gt;
&lt;/game&gt;
</pre>

<p>You can create NFO files if you specify the <strong class="userinput"><code>--generateNFO</code></strong>
when invoking the <strong class="userinput"><code>copy</code></strong> or 
<strong class="userinput"><code>update</code></strong> commands. Note that the generated files will have
and empty plot (maybe in a future version the game plot will be extracted from
<code class="filename">history.dat</code>).</p>

<p>Use the <strong class="userinput"><code>--cleanNFO</code></strong> to remove any unknown
NFO files, in a similar way to the <strong class="userinput"><code>--cleanROMs</code></strong> flag. The
list of deleted NFO files in destDir is always printed.</p>

<p>Regarding Artwork files, have a look first at the Artwork section of
<span class="application">xru-console</span> because in <span class="application">xru-mame</span>
this works in a very similar way. The main difference is that complete collections
of Artwork for MAME exist, so there is no need for artwork substitution in 
<span class="application">xru-mame</span>. Either you have the artwork or have not.</p>

<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3>Artwork must have .png extension (lowercase).</div>

<p>If you have local Artwork available and want to copy it into destination
folders (synchronised with your filtered ROM list), then configure the following
into your MAME ROM filter.</p>

<pre class="programlisting">
&lt;MAMEFilter&gt;
...
  &lt;ThumbsSource&gt;/home/xbmc/roms/ArtWork/mame-titles/&lt;/ThumbsSource&gt;
  &lt;FanartSource&gt;/home/xbmc/roms/ArtWork/mame-snaps/&lt;/FanartSource&gt;
  &lt;ThumbsDest  &gt;/home/xbmc/NUC-remote/ROMs/ArtWork/mame-thumbs/&lt;/ThumbsDest&gt;
  &lt;FanartDest  &gt;/home/xbmc/NUC-remote/ROMs/ArtWork/mame-fanart/&lt;/FanartDest&gt;
...
&lt;/MAMEFilter&gt;
</pre>

<p>You may check you configuration with the
<strong class="userinput"><code>check-artwork &lt;filterName&gt;</code></strong> command. For example:</p>

<pre class="screen">
$ ./xru-console.py check-artwork main
XBMC ROM utilities - MAME edition version 0.1.0 alpha 1
[Parsing config file]
[Check-ArtWork]
Filter name = main
[Parsing MAME merged XML]
Parsing MAME merged XML file ./DAT-mame/mame-0153-reduced-merged.xml...  done
Total number of games = 30043
Number of parents = 9833
Number of clones = 20210
[Applying MAME filters]
NOTE: -vv if you want to see filters in action
[Main filter]
&gt;&gt;&gt; Default filter, removing devices
Removed =   794 / Remaining = 29249
&gt;&gt;&gt; Filtering out clones
Removed = 20210 / Remaining =  9039
&gt;&gt;&gt; Filtering out games with samples
Removed =   279 / Remaining =  8760
&gt;&gt;&gt; Filtering out mechanical games
Removed =  2458 / Remaining =  6302
&gt;&gt;&gt; Filtering out Non-Working games
Removed =  2628 / Remaining =  3674
[Driver filter]
&gt;&gt;&gt; Filtering Drivers
Removed =   237 / Remaining =  3437
[Categories filter]
&gt;&gt;&gt; Filtering Categories
Removed =   739 / Remaining =  2698
[Creating list of ROMs to be copied/updated]
Added 2672 ROMs
[Artwork report]
&lt;&lt;  ROM  &gt;&gt; 10yard.zip
 Original   10yard
 Have T     10yard.png
 Have F     10yard.png
...
&lt;&lt;  ROM  &gt;&gt; zzyzzyxx.zip
 Original   zzyzzyxx
 Have T     zzyzzyxx.png
 Have F     zzyzzyxx.png
Number of ROMs in destDir  = 2672
Number of ArtWork found    = 2672
Number of original ArtWork = 2672
Number of replaced ArtWork = 0
Number of have Thumbs    = 2672
Number of missing Thumbs = 0
Number of have Fanart    = 2672
Number of missing Fanart = 0
</pre>

<p>Note that in <span class="application">xru-mame</span> no artwork substitution
is done. All artwork should be either original or missing and if not then 
that is a bug.</p>

<p>When you are happy with the results, you can copy/update your
Artwork with the commands <strong class="userinput"><code>copy-artwork &lt;filterName&gt;</code></strong>
and <strong class="userinput"><code>update-artwork &lt;filterName&gt;</code></strong>. You can use the
<strong class="userinput"><code>--cleanArtWork</code></strong> flag if you want to delete
unknown Artwork into the thumbs and fanart destination directories.</p>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440377888"></a>Some notes</h3></div></div></div>


<div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="idp440379072"></a>QSound and CPS1 and CPS 2 ROMs</h4></div></div></div>


<p>Some CPS1 games and most (all?) CPS2 games require the 
<code class="filename">qsound</code> ROM. This ROM is a <strong class="userinput"><code>device</code></strong>
that is automatically removed. Until I find a better solution,
<code class="filename">qsound</code> is always included no matter the filters
configured by the user.</p>
</div>
</div>
</div>


<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp440382208"></a><span class="application">xru-launcher-AL</span></h2></div></div></div>


<p><span class="application">xru-launcher-AL</span> is a small utility that reads XBMC's 
<a class="ulink" href="http://forum.xbmc.org/showthread.php?tid=85724" target="_top">Advanced Launcher</a>
configuration file and checks the launchers configured by the user. It reports 
if there are missing/unknown ROMs in your launcher and tells what 
launchers need to be updated.</p>

<pre class="screen">
$ xru-launcher-AL.py [-options] command
</pre>

<p>The following commands are supported.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>usage</code></strong></p>
<p>Print usage information.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list</code></strong></p>
<p>Lists every launcher found in Advanced Launcher configuration file.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>list-config</code></strong></p>
<p>Lists every launcher found in the configuration file.</p>
</li><li class="listitem" style="list-style-type: disc">
<p><strong class="userinput"><code>check</code></strong></p>
<p>Checks the Advanced Launcher configuration file and compares againts
the ROM directories. It reports if Advanced Launcher should rescan the
ROM launchers if outdated.</p>
</li></ul></div>

<p>The following options are supported.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<p><strong class="userinput"><code>-h, --help</code></strong></p>
<p>Print short command reference.</p>
</li><li class="listitem">
<p><strong class="userinput"><code>-v, --verbose</code></strong></p>
<p>Print more information about what is going on.</p>
</li><li class="listitem">
<p><strong class="userinput"><code>-l, --log</code></strong></p>
<p>Save program output in <code class="filename">xru-launcher-AL-log.txt</code></p>
</li></ul></div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440398880"></a>Configuration</h3></div></div></div>


<p><span class="application">xru-launcher-AL</span> expects to be run on a different
computer where your XBMC media center is. The user's directory is network-mounted
in the computer you run <span class="application">xru-launcher-AL</span> using FUSE 
<span class="application">sshfs</span>, <span class="application">nfs</span>,
<span class="application">samba</span>, etc. However, it can also be run on the
HTPC computer.</p>

<p>To start using <span class="application">xru-launcher-AL</span>, create a
minimalistic configuration file named <code class="filename">xru-launcher-AL-config.xml</code>.</p>

<pre class="programlisting">
&lt;AdvancedLauncher&gt;
&lt;configFile&gt;/home/wintermute/NUC-remote/.xbmc/userdata/addon_data/plugin.program.advanced.launcher/launchers.xml&lt;/configFile&gt;
&lt;/AdvancedLauncher&gt;
</pre>

<p>The tag <strong class="userinput"><code>configFile</code></strong> configures the location of 
Advanced Launcher's configuration file.</p>

<p>Next, use the <strong class="userinput"><code>list</code></strong> command to read
Advance Launcher's configuration file and list every launcher found
there. You sould get something like this.</p>

<pre class="programlisting">
$ ./xru-launcher-AL.py list       
XBMC ROM utilities - Advanced Launcher version 0.1.0
[Parsing config file]
[Listing Advanced Launcher launchers]
Parsing Advanced Launcher configuration file... done
&lt;Launcher&gt;
 lauch_name        = "Game Boy Advance (RetroArch VBA-Next)"
 lauch_application = /home/wintermute/bin/bin-retroarch/retroarch
 lauch_args        = -L /home/wintermute/bin/bin-libretro/vba_next_libretro.so "%rom%"
 lauch_rompath     = /home/wintermute/ROMs/roms-nintendo-gbadvance-nointro/
 lauch_thumbpath   = /home/wintermute/ROMs/artwork-AL/artwork-nintendo-gbadvance/thumbs/
 lauch_fanartpath  = /home/wintermute/ROMs/artwork-AL/artwork-nintendo-gbadvance/fanart/
 lauch_romext      = zip
...
</pre>

<p>For every launcher you want to check you need to create an entry
in <span class="application">xru-launcher-AL</span> configuration file. To
check the launcher in the example, add this to the configuration
file.</p>

<pre class="programlisting">
&lt;AdvancedLauncher&gt;
&lt;configFile&gt;/home/wintermute/NUC-remote/.xbmc/userdata/addon_data/plugin.program.advanced.launcher/launchers.xml&lt;/configFile&gt;

&lt;launcher name="Game Boy Advance (RetroArch VBA-Next)"&gt;
&lt;ROMsDest  &gt;/home/wintermute/NUC-remote/ROMs/roms-nintendo-gbadvance-nointro/&lt;/ROMsDest&gt;
&lt;FanartDest&gt;/home/wintermute/NUC-remote/ROMs/artwork-AL/artwork-nintendo-gbadvance/fanart/&lt;/FanartDest&gt;
&lt;ThumbsDest&gt;/home/wintermute/NUC-remote/ROMs/artwork-AL/artwork-nintendo-gbadvance/thumbs/&lt;/ThumbsDest&gt;
&lt;/launcher&gt;
&lt;/AdvancedLauncher&gt;
</pre>

<p>Because <span class="application">xru-launcher-AL</span> runs on a different computer
that Advanced Launcher, directory names will be different, so you have to tell
<span class="application">xru-launcher-AL</span> the directory location on the local computer
of the remote (network mounted) directories. Only the launchers listed in
<span class="application">xru-launcher-AL</span>'s configuration file will be checked.</p>

<p>Once you have finished editing the configuration file, you can
check the configured launchers with the <strong class="userinput"><code>list-config</code></strong> command.
For example.</p>

<pre class="programlisting">
$ ./xru-launcher-AL.py list-config
XBMC ROM utilities - Advanced Launcher version 0.1.0
[Parsing config file]
[Listing configuration]
Advanced Launcher configuration file
 /home/wintermute/NUC-remote/.xbmc/userdata/addon_data/plugin.program.advanced.launcher/launchers.xml
&lt;Launcher&gt;
 name          = Game Boy Advance (RetroArch VBA-Next)
 destDir       = /home/wintermute/NUC-remote/ROMs/roms-nintendo-gbadvance-nointro/
 fanartDestDir = /home/wintermute/NUC-remote/ROMs/artwork-AL/artwork-nintendo-gbadvance/fanart/
 thumbsDestDir = /home/wintermute/NUC-remote/ROMs/artwork-AL/artwork-nintendo-gbadvance/thumbs/
</pre>
</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440399136"></a>Checking launchers</h3></div></div></div>


<p>To check you launchers use the <strong class="userinput"><code>check</code></strong> command. You will
see some information of the process and at the end a report of the launchers not
checked, launchers checked and up to date, and launchers checked which need
an update.</p>

<pre class="programlisting">
$ ./xru-launcher-AL.py check
XBMC ROM utilities - Advanced Launcher version 0.1.0
[Parsing config file]
[Checking Advanced Launcher launchers]
Parsing Advanced Launcher configuration file... done
&lt;Launcher&gt; 'Game Boy Advance (RetroArch VBA-Next)'
 Not found AL configuration file ROM path
 Using configured ROM local path for this launcher
 0 not found ROMs in AL configuration file
 0 missing ROMs in AL configuration file
...
&lt;Launcher&gt; 'SNES (Mednafen)'
 Not found AL configuration file ROM path
 Using configured ROM local path for this launcher
 0 not found ROMs in AL configuration file
 0 missing ROMs in AL configuration file
[Report]
The following launchers were not checked
 Playstation (Mednafen)
The following launchers were checked and are up to date
 MAME
 MAME CPS1
 MAME CPS2
 MAME CPS3
 MAME Neo-Geo
 SNES (Mednafen)
Advanced Launcher needs an update for the following launchers
 Game Boy Color (Mednafen)
 Game Gear (Mednafen)
 Mega Drive 32X (RetroArch Picodrive)
</pre>

</div>
</div>


<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp440417504"></a>Examples</h2></div></div></div>


<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440418176"></a>Simple filtering of a console ROM collection</h3></div></div></div>


<p>You have a No-Intro ROM collection of the Sega Genesis and want to
filter this collection to remove clone ROMs and Japanese ROMs. This is the 
situation.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The ROM collection is stored in your desktop computer in 
the directory <code class="filename">/home/wintermute/No-Intro/Sega Genesis/</code>. 
</p></li><li class="listitem"><p>
XBMC is installed on a dedicated HTPC, which uses XBMCbuntu. XBMC runs 
with user xbmc.</p></li><li class="listitem"><p>The xbmc user's home directory is network-mounted in the 
desktop computer using FUSE's <span class="application">sshfs</span> in 
<code class="filename">/home/wintermute/XBMC-remote/</code>.</p>
</li><li class="listitem"><p>You want to store your ROM collection in the HTPC computer in
the directory <code class="filename">/home/xbmc/ROMs/roms-sega-genesis/</code>. Note 
that in the desktop computer this directory is 
<code class="filename">/home/wintermute/XBMC-remote/ROMs/roms-sega-genesis/</code>.</p>
</li><li class="listitem"><p>You prefer European/USA ROMs over Japanese ones. Also, you
want to remove all Japanese games.</p>
</li></ul></div>

<p>First, create the destination directories. Make sure your HTPC
is network-mounted.</p>

<pre class="screen">
$ mkdir XBMC-remote/ROMs/roms-sega-genesis
</pre>

<p>Then, create the configuration file
<code class="filename">xru-console-config.xml</code>.</p>

<pre class="screen">
&lt;ROMcollections&gt;
&lt;collection name="Sega Mega Drive" shortname="genesis"&gt;
  &lt;ROMsSource&gt;/home/wintermute/No-Intro/Sega Genesis/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/wintermute/XBMC-remote/ROMs/roms-sega-genesis/&lt;/ROMsDest&gt;

  &lt;filterUpTags&gt;Europe, World, Rev2, Rev 1, Rev A&lt;/filterUpTags&gt;
  &lt;filterDownTags&gt;Japan, Beta, Proto&lt;/filterDownTags&gt;
  &lt;includeTags&gt;Europe, USA&lt;/includeTags&gt;
  &lt;excludeTags&gt;Japan&lt;/excludeTags&gt;
&lt;/collection&gt;
&lt;/ROMcollections&gt; 
</pre>

<p>Next, check everything is all-right.</p>

<pre class="screen">
$ ./xru-console.py check-filter genesis
</pre>

<p>Finally, copy the ROMs.</p>

<pre class="screen">
$ ./xru-console.py update genesis
</pre>

</div>

<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440418608"></a>Splitting <span class="application">MAME</span> ROMs into several launchers
for each driver</h3></div></div></div>


<p>You have a <span class="application">MAME</span> ROM collection
and want to split it into 3 folders: First one will have most
games, second folder will have only CPS1 games, and third folder
will have only CPS2 games. The ROM collection is stored in your desktop 
computer in the directory <code class="filename">/home/wintermute/MAME/roms/</code>.
The xbmc user's home directory is network-mounted in the 
desktop computer using FUSE's <span class="application">sshfs</span> in 
<code class="filename">/home/wintermute/XBMC-remote/</code>.</p>


<p>First, create the destination directories. Make sure your HTPC
is network-mounted.</p>

<pre class="screen">
$ mkdir DAT-mame
$ mkdir XBMC-remote/ROMs/roms-mame-main
$ mkdir XBMC-remote/ROMs/roms-mame-cps1
$ mkdir XBMC-remote/ROMs/roms-mame-cps2
</pre>

<p>Create the <span class="application">MAME</span> game databases as
described <a class="link" href="#create_mame_database" title="Creating the MAME ROM database">here</a>.</p>

<p>Then, create the configuration file
<code class="filename">xru-mame-config.xml</code>.</p>

<pre class="screen">
&lt;MAMEConfig&gt;
&lt;General&gt;
  &lt;MAME_XML      &gt;./DAT-mame/mame-0153.xml&lt;/MAME_XML&gt;
  &lt;MAME_XML_redux&gt;./DAT-mame/mame-0153-reduced.xml&lt;/MAME_XML_redux&gt;
  &lt;Catver        &gt;./DAT-mame/Catver.ini&lt;/Catver&gt;
  &lt;MergedInfo    &gt;./DAT-mame/mame-0153-reduced.xml&lt;/MergedInfo&gt;
&lt;/General&gt;

&lt;MAMEFilter name="main"&gt;
  &lt;ROMsSource&gt;/home/wintermute/MAME/roms-mame/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/wintermute/NUC-remote/ROMs/roms-mame-main/&lt;/ROMsDest&gt;

  &lt;MainFilter&gt;NoClones, NoSamples, NoMechanical, NoNonworking&lt;/MainFilter&gt;
  &lt;Driver&gt;not cps1, not cps2&lt;/Driver&gt;
  &lt;Categories&gt;Fighter, Puzzle&lt;/Categories&gt;
&lt;/MAMEFilter&gt;

&lt;MAMEFilter name="cps1"&gt;
  &lt;ROMsSource&gt;/home/wintermute/MAME/roms-mame/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/wintermute/NUC-remote/ROMs/roms-mame-cps1/&lt;/ROMsDest&gt;

  &lt;MainFilter&gt;NoClones, NoSamples, NoMechanical&lt;/MainFilter&gt;
  &lt;Driver&gt;cps1&lt;/Driver&gt;
&lt;/MAMEFilter&gt;

&lt;MAMEFilter name="cps2"&gt;
  &lt;ROMsSource&gt;/home/wintermute/MAME/roms-mame/&lt;/ROMsSource&gt;
  &lt;ROMsDest  &gt;/home/wintermute/NUC-remote/ROMs/roms-mame-cps2/&lt;/ROMsDest&gt;

  &lt;MainFilter&gt;NoClones, NoSamples, NoMechanical&lt;/MainFilter&gt;
  &lt;Driver&gt;cps2&lt;/Driver&gt;
&lt;/MAMEFilter&gt;
&lt;/MAMEConfig&gt; 
</pre>

<p>Next, check everything is all-right.</p>

<pre class="screen">
$ ./xru-mame.py check-filter main
$ ./xru-mame.py check-filter cps1
$ ./xru-mame.py check-filter cps2
</pre>

<p>Finally, copy the ROMs.</p>

<pre class="screen">
$ ./xru-mame.py update main
$ ./xru-mame.py update cps1
$ ./xru-mame.py update cps2
</pre>
</div>
</div>




<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp440443264"></a>Changelog</h2></div></div></div>


<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp440444224"></a>Version 0.1</h3></div></div></div>

</div>
<p>Released on July 2014.</p>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
<p>Initial release.</p>
</li></ul></div>
</div>

</div></body></html>